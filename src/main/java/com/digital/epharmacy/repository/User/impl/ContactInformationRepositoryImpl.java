package com.digital.epharmacy.repository.User.impl;

/*
 * Author: Matthew Pearce
 * Desc: Contact Information repository implementation
 * Date: 29 August 2020
 */

import com.digital.epharmacy.entity.User.ContactInformation;
import com.digital.epharmacy.repository.User.ContactInformationRepository;

import java.util.HashSet;
import java.util.Set;

public class ContactInformationRepositoryImpl implements ContactInformationRepository {

    private static ContactInformationRepository repository = null;
    private Set<ContactInformation> contactInformationDB;

    public ContactInformationRepositoryImpl(){this.contactInformationDB = new HashSet<>();
    }

    public static ContactInformationRepository getRepository() {

        if(repository == null) repository = new ContactInformationRepositoryImpl();
        return  repository;
    }





    @Override
    public ContactInformation create(ContactInformation contactInformation) {
        this.contactInformationDB.add(contactInformation);
        return contactInformation;
    }

    @Override
    public ContactInformation read(String UserId) {

        ContactInformation UserProfile = null;
        for(ContactInformation u: this.contactInformationDB){
            if(u.getUserId().equalsIgnoreCase(UserId)){

                UserProfile = u;
            }
        }

        return UserProfile;
    }

    @Override
    public ContactInformation update(ContactInformation contactInformation) {
       ContactInformation oldContactInformation = read(contactInformation.getUserId());
       if(oldContactInformation != null){

           this.contactInformationDB.remove(oldContactInformation);
           this.contactInformationDB.add(contactInformation);
       }

       return contactInformation;
    }

    @Override
    public boolean delete(String userID) {

        ContactInformation User = read(userID);
        if(userID != null){

            this.contactInformationDB.remove(User);
            return true;
        }

        return false;
    }

    @Override
    public Set<ContactInformation> getAll() {
        return this.contactInformationDB;
    }
}

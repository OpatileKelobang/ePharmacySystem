package com.digital.epharmacy.repository.Payment.impl;

/*
 * Author: Matthew Pearce
 * Desc: Payment repository implementation
 * Date: 29 August 2020
 */

import com.digital.epharmacy.entity.Payment.Payment;
import com.digital.epharmacy.repository.Payment.PaymentRepository;

import java.util.HashSet;
import java.util.Set;

public class PaymentRepositoryImpl implements PaymentRepository {

    public static PaymentRepository repository = null;
    private Set<Payment> paymentDB;

    //Constructor
    public PaymentRepositoryImpl(){this.paymentDB = new HashSet<>(); }

    public static PaymentRepository getRepository(){
        if(repository == null) repository = new PaymentRepositoryImpl();
        return repository;
    }






    @Override
    public Payment create(Payment payment) {
       this.paymentDB.add(payment);
       return payment;
    }

    @Override
    public Payment read(String userID) {
        Payment orderNumber = null;

        for (Payment u: this.paymentDB)
            if(u.getOrderNumber().equalsIgnoreCase(String.valueOf(orderNumber))){

            orderNumber = u;
        }

        return orderNumber;
}



    @Override
    public Payment update(Payment payment) {
        Payment oldPayment= read(payment.getUserID());
        if(oldPayment != null){
            this.paymentDB.remove(oldPayment);
            this.paymentDB.add(payment);
        }
        return payment;
    }



    @Override
    public boolean delete(String userID) {
        Payment payment =read(userID);
        if (userID != null)
        {
            this.paymentDB.remove(payment);
            return true;
        }
        return false;
    }

    @Override
    public Set<Payment> getAll() {
        return this.paymentDB;
    }
}
